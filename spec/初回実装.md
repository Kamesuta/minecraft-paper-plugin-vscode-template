# Minecraftプラグイン開発環境 仕様書

## 1. 目的

GitHub CodespaceとDevContainerを利用し、初心者が環境構築の手間なく、AIによるMinecraftプラグインのコーディングを手軽に体験できる開発環境を構築することを主な目的とします。

## 2. DevContainerの構成

### 2.1. ベースイメージ
- Java開発に適したビルド済みイメージ（例: `mcr.microsoft.com/devcontainers/java`）を使用します。

### 2.2. ツールとバージョン
- **Java:** Java 21 (LTS)
- **ビルドツール:** Maven
- **Minecraftサーバー:** Paper (Spigotの高性能フォーク)
- **AIツール:** Gemini CLI (プリインストール・設定済み)

### 2.3. VSCode拡張機能
以下の拡張機能が自動的にインストールされるようにします:
- Extension Pack for Java (Microsoft製)
- Gemini (Google製)

### 2.4. デバッグ設定
- F5キーを押すだけでサーバーの起動とJavaデバッガーのアタッチができるよう、`.vscode/launch.json`ファイルを事前設定します。

## 3. ユーザーのワークフロー

1.  ユーザーはGitHub Codespaceでリポジトリを開きます。
2.  DevContainerが自動的にビルドされ、必要なツールや依存関係がすべてインストールされます。
3.  すぐに使える状態でVSCodeが起動します。
4.  ランダムなパッケージ名（例: `mods.kpw.my_example_plugin`）を持つサンプルのプラグインプロジェクトが提供されます。
5.  ユーザーは `GEMINI.md` に従って、`plugin.yml` でプラグイン名をカスタマイズします。
6.  ユーザーはGemini CLIと対話し、プラグインのコードを修正・作成できます。
7.  F5キーを押すだけで、プラグインが導入されたMinecraftサーバーが起動し、デバッグセッション（ブレークポイントを含む）を開始できます。

## 4. ディレクトリ構成

```
/
|-- .devcontainer/
|   |-- devcontainer.json  # DevContainer定義ファイル
|   `-- Dockerfile         # (任意) カスタムセットアップ用
|-- .vscode/
|   `-- launch.json        # デバッグ実行構成
|-- src/
|   `-- main/
|       |-- java/
|       |   `-- mods/kpw/ランダムな名前/ # 例: mods.kpw.my_example_plugin
|       |       `-- Main.java          # メインのプラグインクラス
|       `-- resources/
|           `-- plugin.yml           # プラグインのメタデータ (ユーザーが編集必須)
|-- pom.xml                  # Mavenプロジェクトファイル
|-- run/                     # Paperサーバーのjarを置くディレクトリ
|   `-- (最初は空)
|-- README.md                # ユーザー向けガイド
`-- GEMINI.md                # プラグインのカスタマイズとAIコーディングのチュートリアル
```

## 5. カスタマイズ

各ユーザーが固有のプラグインを作成できるよう、以下の項目はエンドユーザーが変更することを想定しています。

- **パッケージ名:** Javaのパッケージ名はプロジェクトセットアップ時にランダムに生成されます。
- **プラグイン名:** `src/main/resources/plugin.yml` ファイルの `name` フィールドを編集して、ユーザー自身がプラグイン名を決定する**必要があります**。
- **手順書:** これらのカスタマイズ手順やAIを使ったコーディングの開始方法を案内するファイルとして `GEMINI.md` を提供します。

## 6. 必要となるコマンド

- **ビルドコマンド:** `mvn clean package`
- **実行とデバッグ:** `F5`キーを押す
